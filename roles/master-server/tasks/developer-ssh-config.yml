---
# developer ssh homedir
- name: developer ssh homedir
  sudo: true
  file: path=/home/{{tsadm_developers[item].name}}/.ssh
        state=directory
        owner={{tsadm_developers[item].name}}
        group={{tsadm_developers[item].name}}
        mode=0750
  with_items:
    tsadm_auth_developers
  tags:
    - tsadm-site
    - developer-setup


# developer ssh config
- name: developer ssh config
  sudo: true
  template: src=developer-ssh-config
            dest=/home/{{tsadm_developers[item].name}}/.ssh/config
            owner={{tsadm_developers[item].name}}
            group={{tsadm_developers[item].name}}
            mode=0640
            backup=yes
  with_items:
    tsadm_auth_developers
  tags:
    - tsadm-site
    - developer-setup


# developer ssh authorized_keys
- name: developer ssh authorized_keys
  sudo: true
  template: src=developer-ssh-authorized_keys
    dest=/home/{{tsadm_developers[item].name}}/.ssh/authorized_keys
    owner={{tsadm_developers[item].name}}
    group={{tsadm_developers[item].name}}
    mode=0600
    backup=yes
  with_items:
    tsadm_auth_developers
  tags:
    - tsadm-site
    - developer-setup
